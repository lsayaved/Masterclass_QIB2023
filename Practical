### 2. Run docker and visualize the database


Paper:

https://genomebiology.biomedcentral.com/articles/10.1186/s13059-023-02924-x

Full datasets:

https://merenlab.org/data/fmt-gut-colonization/

- Download donor A data pack:
````bash
curl -L https://ndownloader.figshare.com/files/27452192 \
     -o FMT_DONOR_A_AND_RECIPIENTS.tar.gz
````
- unpack (this should take about 30 seconds on a standard laptop and result in a directory that takes about 8Gb of storage space
````bash
tar -zxvf FMT_DONOR_A_AND_RECIPIENTS.tar.gz
````
- go into the directory:
````bash
cd FMT_DONOR_A_AND_RECIPIENTS
````
- make sure you have all the files:
````bash
ls -l
````

- Open docker, then open a terminal and type:
````bash
docker run --rm -it -v `pwd`:`pwd` -w `pwd` -p 8080:8080 meren/anvio:7.1_main_0522

````

- migrate the data to the newest version of anvio
````bash
anvi-migrate --migrate-dbs-safely *.db
````

### 3. Let's play with Anvio

- show collections of files:
````bash
anvi-show-collections-and-bins -p PROFILE.db
````
- Make not of one of the genomes for later, e.g. 
DA_MAG_00002

- Visualize the coverage of each of the contigs of this MAG
````bash
anvi-refine --profile-db PROFILE.db \
            --contigs-db CONTIGS.db \
            --collection-name default \
            --bin-id DA_MAG_00002
````
 You will see your results in a web browser using the port http://0.0.0.0:8080

- Visualize all the genomes from donor A, when transplanted and in the original donor. It will take some moements to load
````bash
anvi-interactive --profile-db PROFILE.db \
                 --contigs-db CONTIGS.db \
                 --collection-name default \
                 --additional-layers MAGs-additional-data.txt \
                 --tree MAGs-order-by-detection.newick
````

## Questions:

### a) From a randomly selected single genome:

1. Can you identify the taxonomic classification, the completeness and the redundancy (contamination)?

### b) From the whole collection:
1.  Can you change the taxonomic level displayed?
2. What are the dominant taxa at the phylum level for the FMT donor?
3. What are the dominant taxa for the recipients before and after FMT (phylum level)?
